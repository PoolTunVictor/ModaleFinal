<!-- ðŸ”´ BANNER GLOBAL -->
<app-banner
  title="CARRITO"
  subtitle="Todo lo que compraste, organizado para ti">
</app-banner>

<section class="cart-page">
  <div class="cart-layout">

    <!-- ================= LISTA ================= -->
    <div class="cart-list" *ngIf="cartItems.length > 0; else emptyCart">

      <div class="cart-header">
        <span>PRODUCTO</span>
        <span>CANTIDAD</span>
        <span>PRECIO</span>
        <span>TOTAL</span>
      </div>

      <div class="cart-item" *ngFor="let item of cartItems">

        <!-- PRODUCTO -->
        <div class="product-info">
          <img
            [src]="item.product.main_image || 'assets/no-image.png'"
            class="cart-product-img"
            alt="{{ item.product.name }}"
          />

          <div>
            <strong>{{ item.product.name }}</strong>
            <p class="product-price">${{ item.product.price }}</p>

            <!-- âœ… llamar directo al servicio -->
            <button
              class="remove"
              (click)="cartService.remove(item)">
              Eliminar
            </button>
          </div>
        </div>

        <!-- CANTIDAD -->
        <div class="quantity-control">
          <button (click)="cartService.decrease(item)">âˆ’</button>
          <span>{{ item.quantity }}</span>
          <button (click)="cartService.increase(item)">+</button>
        </div>

        <!-- PRECIO -->
        <div class="price">
          ${{ item.product.price }}
        </div>

        <!-- TOTAL -->
        <div class="total">
          ${{ item.product.price * item.quantity }}
        </div>

      </div>
    </div>

    <!-- ================= RESUMEN / CHECKOUT ================= -->
    <div class="summary">

      <h3>DETALLE DEL PEDIDO</h3>

      <label>Nombre del receptor</label>
      <input type="text" [(ngModel)]="address.receiver_name">

      <label>TelÃ©fono</label>
      <input type="text" [(ngModel)]="address.phone">

      <label>Calle</label>
      <input type="text" [(ngModel)]="address.street">

      <label>Ciudad</label>
      <input type="text" [(ngModel)]="address.city">

      <label>Estado</label>
      <input type="text" [(ngModel)]="address.state">

      <label>CÃ³digo Postal</label>
      <input type="text" [(ngModel)]="address.postal_code">

      <label>Referencia a domicilio</label>
      <input type="text" [(ngModel)]="address.references">

      <div class="summary-total">
        <span>Total</span>
        <strong>${{ getTotal() }}</strong>
      </div>

      <!-- âœ… generar pedido -->
      <button
        class="checkout-btn"
        (click)="generateOrder()">
        GENERAR PEDIDO
      </button>

      <a class="continue" routerLink="/">
        ContinÃºa comprando â†’
      </a>

    </div>

  </div>
</section>

<!-- ================= CARRITO VACÃO ================= -->
<ng-template #emptyCart>
  <p class="empty-cart">
    Tu carrito estÃ¡ vacÃ­o ðŸ›’
  </p>
</ng-template>
