<div
  class="product-card"
  *ngIf="product as p"
  (click)="goToDetail()"
>

  <!-- IMAGEN -->
  <div class="product-image">
    <img
      *ngIf="p.main_image; else noImage"
      [src]="p.main_image"
      alt="{{ p.name }}"
    />

    <ng-template #noImage>
      <div class="no-image">Sin imagen</div>
    </ng-template>
  </div>

  <!-- INFO -->
  <div class="product-info">
    <p class="product-name">{{ p.name }}</p>

    <p class="product-price">$ {{ p.price }}</p>

    <!-- STOCK -->
    <p class="product-stock" [class.out]="p.stock === 0">
      Stock: {{ p.stock }}
    </p>

    <!-- BOTÃ“N -->
    <button
      class="add-btn"
      (click)="addToCart($event)"
      [disabled]="p.stock === 0"
    >
      Agregar
    </button>
  </div>

</div>

<!-- ================= MODAL PRODUCTO AGREGADO ================= -->
<div *ngIf="showAddedModal">
  <div class="modal-backdrop" (click)="closeAddedModal()"></div>

  <div class="login-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Producto agregado</h3>
      <button class="close-btn" (click)="closeAddedModal()">âœ•</button>
    </div>

    <div class="modal-body">
      <p>
        <strong>{{ product.name }}</strong><br>
        fue agregado correctamente al carrito ðŸ›’
      </p>

      <button
        class="checkout-btn"
        style="margin-top: 12px"
        (click)="closeAddedModal()">
        Seguir comprando
      </button>
    </div>
  </div>
</div>
